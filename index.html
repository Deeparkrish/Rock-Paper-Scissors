<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8" />
    <title>Rock Paper Scissors</title>
  </head>
  <body>
    <h1 style="text-align:center; margin-top:20%;">
      Let's play Rock Paper Scissors!<br />Refresh to play again!
    </h1>
    <script type="text/javascript">
      // TODO: Create an array of the three game choices (Rock, Paper, or Scissors).
      var gameChoices =["rock","paper", "scissors"];

      // TODO: Create variables to hold the number of wins, losses, and ties. They start at 0.
      var wins=0;
      var losses=0;
      var ties=0;

      
      // Add the input  from user code block in a function and recursively call it 
      var userInput =function(){
          var userChoice =prompt("Welcome to Rock-Paper-Scissors game! Please enter your choice-rock, paper or scissors.");
          if (userChoice === null || userChoice==="")
          {
            window.alert("You need to provide a valid input! Please try again.");
              return userInput();
          }
          userChoice = userChoice.toLowerCase();   
          if (userChoice ==='rock'|| userChoice ==='paper'|| userChoice ==='scissors')
          { 
              return userChoice;     
          }
          else
          {
              window.alert("You need to provide a valid input! Please try again.");
              return userInput();
          }  
        }
      
      // function play again 
      var playAgain =function(){
        var playAgainConfirm = window.confirm("Would you like to play again?");
         return playAgainConfirm; 
      };
   
      var playerConfirm =true;

      // Keep track of round number 
      var round =0;
      while (playerConfirm)
      {    
          round =round +1;
          // TODO: Randomly choose a choice from the gameChoices array. This is the computer's turn.
          var computerTurn = gameChoices[Math.floor(Math.random()*gameChoices.length)];
          console.log(computerTurn);
          // TODO: Collect the user's response and convert to lower case. This is the user's turn.
          var userTurn = userInput();
          console.log(userTurn);
          // TODO: Create the game logic to run if the user chooses a valid game choice
          
          // If both picked the same choice 
          if ( computerTurn=== userTurn)
          {
            ties=ties+1;
            alert( "It's a tie ! in round :" + round+ ".");
          }
          else {
            if ((userTurn==='rock' && computerTurn==='scissors' )|| (userTurn==='paper' && computerTurn === 'rock') || (userTurn === 'scissors' && computerTurn==='paper'))
            {
              wins +=1;
            alert("Round" + round + ":Congratulations! You won !! \n You got" + wins+ "points" );
            }
            else 
            {
              losses +=1;
              alert("Round" + round + ": Sorry you lost !! \n You lost by " +losses + "points."); 
            }
          }
          
          playerConfirm =playAgain();
      }
       
   
      // TODO: When the game is over, alert the final total to the user. We can use the \n character to make a line break.
      alert( "Thanks for Playing! \n Final Results after" + round + "rounds : \n Wins : " + wins+ " points.\n Lost:" + losses+ " points.\n Ties :" + ties +"points.");
              
    </script>
  </body>
</html>
